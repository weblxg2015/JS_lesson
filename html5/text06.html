<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script>
        /*
        canvas动画：实际就一个不断擦除，重绘，擦除，重绘的过程


         */
        window.onload=function(){
            var v_canvas = document.createElement("canvas");
            v_canvas.style.background="url('images/bg.png')";
            v_canvas.width = 600;
            v_canvas.height = 400;
            document.body.appendChild(v_canvas);
            var context = v_canvas.getContext('2d');
            var img=new Image();
            img.src = 'images/bg.png';
            var img2=new Image();
            img2.src = 'images/player.png';
            var img3=new Image();
            img3.src = 'images/enemy.png';
            var a1=Math.random()*550;

            setTimeout(fun01,1000);
            var flag=1;
            function fun01(){//3秒后出现
                context.drawImage(img2,0,0,50,60,50,285,0,60);
                var fps=10;
                var s=1000/fps;
                var x1= 0;
                var i=0;
                var j=0;
                setInterval(function(){//来回走动
                    context.clearRect(0,0,600,400);
                    if(flag==1) {
                        context.drawImage(img2, x1, 0, 50, 60, i*10, 285, 50, 60);
                        x1 += 50;
                        i++;
                        if (x1 == 100) {
                            x1 = 0;
                        }
                        if(i==55){
                            flag=0;
                            i=0;
                        }
                    }
                   else if(flag==0) {
                        context.drawImage(img2, x1, 60, 50, 60, 550-j*10, 285, 50, 60);
                        x1 += 50;
                        j++;
                        if (x1 == 100) {
                            x1 = 0;
                        }
                        if(j==55){
                            flag=1;
                            j=0;
                        }
                    }

                    context.drawImage(img3, 0, 0, 50, 50, a1, 0, 50, 60);
                },s)
            }



            //帧：fps=30

        }


    </script>
</head>
<body>

</body>
</html>